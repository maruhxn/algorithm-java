# 트리
## 세그먼트 트리
: 주어진 데이터들의 구간 합과 데이터 업데이트를 빠르게 수행하기 위해 고안해낸 자료구조

> 더 큰 범위는 인덱스 트리라고도 불리지만, 코테에서는 큰 차이 X

### 세그먼트 트리의 종류
- 구간 합 구하기
- 최댓값 구하기
- 최솟값 구하기

### 세그먼트 트리 구현
1. 트리 초기화하기
   - 리프 노드의 개수가 데이터의 개수(N) 이상이 되도록 트리 배열을 만든다
     - 트리 배열의 크기: `2^k >= N`을 만족하는 k의 최솟값을 구하고, `2^k * 2`를 트리 배열의 크기로 설정
     - ex) N = 8이면, 2^3 >= 8이므로, 2^3 *2 = 16으로 정의
   - 리프 노드에 원본 데이터 입력
     - 리프 노드의 시작 인덱스는 `2^k`
   - 리프 노드를 제외한 나머지 노드의 값을 채운다
     - 채워야 하는 인덱스가 `i`라면 자신의 자식 노드는 `2i`, `2i + 1`이므로 이를 바탕으로 채움
     - 구간 합: `A[N] = A[2N] + A[2N + 1]`
     - 최대: `Math.max(A[2N], A[2N + 1])`
     - 최소: `Math.min(A[2N], A[2N + 1])`
2. 질의값(구간 합 or 최대, 최소)
   - 질의값 예시: `2 ~ 6번째 구간 합을 구하라`
   - 주어진 질의 인덱스를 세그먼트 트리의 리프 노드에 해당하는 인덱스로 변경
     - `세그먼트 트리 index = 주어진 질의 index + 2^k - 1`
   - 질의값 구하는 과정
     - `end >= start index`동안 다음 반복
       - `start_index % 2 == 1`이면, 해당 노드 선택
       - `end_index % 2 == 0`이면, 해당 노드 선택
       - start_index depth 변경 -> `start_index = (start_index + 1) / 2`
       - end_index depth 변경 -> `end_index = (end_index - 1) / 2`
     - 해당 노드 선택 == 해당 노드의 부모가 나타내는 범위가 질의 범위를 넘어가기 때문에 해당 노드를 질의값에 영향을 미치는 독립 노드로 선택하고, 해당 노드의 부모 노드는 대상 범위에서 제외한다는 뜻
     - 3,4번 작업이 부모 노드를 대상 범위에서 제거하는 것
   - 질의에 해당하는 노드를 선택하는 방법은 종류와 관계없이 모두 동일하며, 선택된 노드들에 관해 마지막에 연산하는 방식만 다르다
   - 질의에 해당하는 노드 선택 방법
     - 구간합: 선택된 노드들을 모두 더한다
     - 최댓값: 선택된 노드들 중 MAX값을 선택해 출력한다.
     - 최솟값: 선택된 노드들 중 MIN값을 선택해 출력한다.
3. 데이터 업데이트하기
   - 자신의 부모 노드로 이동하면서 업데이트하는 것은 동일하지만, 어떤 값으로 업데이트할 것인지에 관해서는 트리 타입별로 조금 다르다.
   - 구간합: 원래 데이터와 변경 데이터의 차이만큼 부모 노드로 올라가면서 변경
   - 최댓값: 변경 데이터와 자신과 같은 부모를 지니고 있는 다른 자식 노드와 비교해 더 큰 값으로 업데이트. 업데이트가 일어나지 않으면 종료
   - 최솟값: 변경 데이터와 자신과 같은 부모를 지니고 있는 다른 자식 노드와 비교해 더 작은 값으로 업데이트. 업데이트가 일어나지 않으면 종료